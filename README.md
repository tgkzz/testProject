
# testProject

Данный репозиторий является микросервисом отвечающим за манипуляцию данными и занимающимся их дальнейшим обогащением. Обогащенные данные далее записываются в базу данных Postgres


## API Reference

#### Get items

Извлекает запись из базы данных по-уникальному id. Возвращает результат в виде JSON

```http
  GET /api/get/${id}
```

| Parameter | Type  | Description                                 |
|:----------|:------|:--------------------------------------------|
| `id`      | `int` | **Обязательно**. номер записи в базе данных |


#### Get item by filter

Занимается поиском информаций из таблицы, и возвращает ответ в виде JSON. Хотя бы одно из полей не должно быть пустым.

```http
  GET /api/get?${queryParams}
```

| Parameter    | Type     | Description                |
|:-------------|:---------|:---------------------------|
| `id`         | `int`    | номер записи в базе данных |
| `ageto`      | `int`    | возраст от                 |
| `agefrom`    | `int`    | возраст до                 |
| `name`       | `string` | имя человека               |
| `surname`    | `string` | фамилия человека           |
| `patronymic` | `string` | отчество человека          |
| `gender`     | `string` | пол человека               |
| `nation`     | `string` | национальность             |


#### Create new item

Отвечает за создание новых объектов в базе данных, и дальнейшим его обогащением. В результате возвращает json


```http
  POST /api/create
```

| Parameter    | Type     | Description                       |
|:-------------|:---------|:----------------------------------|
| `name`       | `string` | **Обязательно**. имя человека     |
| `surname`    | `string` | **Обязательно**. фамилия человека |
| `patronymic` | `string` | отчество человека                 |


#### Update data in database according new data

Отвечает за изменение созданных объектов в базе данных. Изменяет по параметрам ниже. В ответе выдает статус изменения в виде json


```http
  PATCH /api/update/${id}
```


| Parameter    | Type     | Description                                 |
|:-------------|:---------|:--------------------------------------------|
| `id`         | `int`    | **Обязательно**. номер записи в базе данных |
| `name`       | `string` | имя человека                                |
| `surname`    | `string` | фамилия человека                            |
| `patronymic` | `string` | отчество человека                           |
| `age`        | `int`    | возраст человека                            |
| `gender`     | `string` | пол человека                                |
| `nation`     | `string` | национальнёость                             |


#### Delete item by id

удаляет объект в базе данных по id в таблице

```http
  DELETE /api/delete/${id}
```

| Parameter | Type  | Description                                |
|:----------|:------|:-------------------------------------------|
| `id`      | `int` | **Обязательно**. номер записи в базеданных |

## Environment Variables

Чтобы запустить данный проект, вам следует инициализировать следующие параметры в конфиг файле

`HOST` Адрес хоста, на котором будет запущен ваш сервер

`PORT` Порт, на котором будет запущен ваш сервер

`DRIVERNAME` Имя драйвера базы данных, используемое для подключения. пример: `postgres`

`DBDRIVER` Протокол подключения к базе данных: пример: `postgresql`

`DBUSER` Имя пользователя для подключения к базе данных. пример: `postgres`

`DBPASS` Пароль для подключения к базе данных.

`DBHOST` Хост базы данных, к которой будет осуществляться подключение `localhost`

`DBPORT` Порт, на котором работает база данных. пример: `5432`

`DBNAME` Название базы данных, к которой необходимо подключиться. пример: `test`

`AGEURL` путь к API определяющий возраст. По умолчанию: `https://api.agify.io/`

`GENDERURL` путь к API определяющий пол. По умолчанию: `"https://api.genderize.io/"`

`NATIONURL` путь к API определяющий национальность. По умолчанию: `https://api.nationalize.io/`


## Run Locally

Клонируйте проект

```bash
  git clone https://github.com/tgkzz/testProject.git
```

Пройдите в директорию

```bash
  cd testProject
```

начните сервер

```bash
  go run ./cmd ${configPath}
```

в `configPath` указывайте путь к **конфигурационному файлу**. При запуске без аргументов путь к конфигурационному файлу по умолчанию устанавливается как **корневая директория** проекта

