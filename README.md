
# testProject

Данный репозитория является микросервисом отвечающим за манипуляцию данными и занимающимся их дальнейшим обогащением. Обогащенные данные далее записываются в базу данных Postgres



## API Reference

#### Get items

Вытаскивает запись из базы данных по уникальному id. возвращает результат в виде JSON

```http
  GET /api/get/${id}
```

| Parameter | Type  | Description                                 |
|:----------|:------|:--------------------------------------------|
| `id`      | `int` | **Обязательно**. номер записи в базе данных |


#### Get item by filter

```http
  GET /api/get?${queryParams}
```

занимается поиском информаций из таблицы, и возвращает ответ в виде JSON. Хотя бы одно из полей не должно быть пустым.

| Parameter    | Type     | Description                |
|:-------------|:---------|:---------------------------|
| `id`         | `int`    | номер записи в базе данных |
| `ageto`      | `int`    | возраст от                 |
| `agefrom`    | `int`    | возраст до                 |
| `name`       | `string` | имя человека               |
| `surname`    | `string` | фамилия человека           |
| `patronymic` | `string` | отчество человека          |
| `gender`     | `string` | пол человека               |
| `nation`     | `string` | национальность             |


#### Create new item


```http
  POST /api/create
```

отвечает за создание новых обьектов в базе данных, и дальнейшим его обогащением. в результате возращает json

| Parameter    | Type     | Description                       |
|:-------------|:---------|:----------------------------------|
| `name`       | `string` | **Обязательно**. имя человека     |
| `surname`    | `string` | **Обязательно**. фамилия человека |
| `patronymic` | `string` | отчество человека                 |


#### Update data in database according new data


```http
  PATCH /api/update/${id}
```

отвечает за изменение созданных обьектов в базе данных. изменяет по параметрам ниже. в ответе выдает статус изменения в виде json

| Parameter    | Type     | Description                                 |
|:-------------|:---------|:--------------------------------------------|
| `id`         | `int`    | **Обязательно**. номер записи в базе данных |
| `name`       | `string` | имя человека                                |
| `surname`    | `string` | фамилия человека                            |
| `patronymic` | `string` | отчество человека                           |
| `age`        | `int`    | возраст человека                            |
| `gender`     | `string` | пол человека                                |
| `nation`     | `string` | национальнёость                             |


#### Delete item by id

удаляет обьект в базе данных по id в таблице

```http
  delete /api/delete/${id}
```

| Parameter | Type  | Description                                |
|:----------|:------|:-------------------------------------------|
| `id`      | `int` | **Обязательно**. номер записи в базеданных |

## Environment Variables

Чтобы запустить данный проект, вам следует инициализировать следующие параметры в конфиг файле

`HOST` Адрес хоста, на котором будет запущен ваш сервер

`PORT` Порт, на котором будет запущен ваш сервер

`DRIVERNAME` Имя драйвера базы данных, используемое для подключения. пример: `postgres`

`DBDRIVER` Протокол подключения к базе данных: пример: `postgres`

`DBUSER` Имя пользователя для подключения к базе данных. пример: `postgres`

`DBPASS` Пароль для подключения к базе данных.

`DBHOST` Хост базы данных, к которой будет осуществляться подключение `localhost`

`DBPORT` Порт, на котором работает база данных. пример: `5432`

`DBNAME` Название базы данных, к которой необходимо подключиться. пример: `test`

`AGEURL` путь к API определяющий возраст. По дефолту: `https://api.agify.io/`

`GENDERURL` путь к API определяющий пол. По дефолту: `"https://api.genderize.io/"`

`NATIONURL` путь к API определяющий национальность. По дефолту: `https://api.nationalize.io/`


## Run Locally

сколируйте проект

```bash
  git clone https://github.com/tgkzz/testProject.git
```

пройдите в директорию

```bash
  cd testProject
```

начните сервер

```bash
  go run ./cmd ${configPath}
```

в `configPath` указывайте путь к конфигурационному. запуск без аргументов определяет путь к конфигурационному файлу в `корневой директорий`

